<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Design system docs CMS</title>
</head>
<body>
<!-- Include the script that builds the page and powers Netlify CMS -->
<script src="https://unpkg.com/netlify-cms@^2.0.0/dist/netlify-cms.js"></script>
<script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
<script>
  CMS.registerPreviewStyle('preview.css');
</script>
<script>
  console.log(this);
  CMS.registerEditorComponent({
    id:"Meta",
    label: "Meta",
    fields:[{
      name: "title",
      label: "title",
      widget: "string"
    }],
    pattern: /{{<Meta title="(.*)" >}}/,
    fromBlock: function(match){
      return{
        title: match[1]

      };
    },
    toBlock: ({title}) =>
            `<Meta title="${title}" parameters={{ previewTabs: { canvas: { hidden: true } }, }} /> `,

    toPreview: ({title}) => {
      return `
      <div class="flex flex-wrap w-full justify-center px-4">
         <div class="videos-wrapper mx-auto">
            <div class="pt-5">
               <iframe width="560" height="315" src=${title}
                  frameborder="0";
                  allow="accelerometer; autoplay;
                        clipboard-write; encrypted-media;
                        gyroscope; picture-in-picture" allowfullscreen>
               </iframe>
            </div>
         </div>
      </div>
     `
    }
  })
  CMS.registerEditorComponent({
    id:"litElement",
    label: "Lit Element",
    fields:[{
      name: "lit",
      label: "Lit Element",
      widget: "string"
    }],
    pattern: /{{import { (.*) } from "lit"}}/,
    fromBlock: function(match){
      return{
        lit: match[1]

      };
    },
    toBlock: ({lit}) =>
            `import {${lit}} from "lit"`,

    toPreview: ({lit}) => {
      return `
      <div class="flex flex-wrap w-full justify-center px-4">
         <div class="videos-wrapper mx-auto">
            <div class="pt-5">
               <iframe width="560" height="315" src=${lit}
                  frameborder="0";
                  allow="accelerometer; autoplay;
                        clipboard-write; encrypted-media;
                        gyroscope; picture-in-picture" allowfullscreen>
               </iframe>
            </div>
         </div>
      </div>
     `
    }
  })
  CMS.registerEditorComponent({
    id:"imports",
    label: "Imports",
    fields:[{
        name: "import1",
        label: "Import 1",
        widget: "string",
      },
      {
        name: "import2",
        label: "Import 2",
        widget: "string",
      },
      {
        name: "import3",
        label: "Import 3",
        widget: "string",
      }
    ],
    pattern: /{{import { ([.*]) } from "addon-docs"}}/,
    fromBlock: function(match){
      return{
        import1: match[1],
        import2: match[2],
        import3: match[3],
      };
    },
    toBlock: ({imports}) =>
            `import {${imports}} from "@storybook/addon-docs"`,

    toBlock: function (obj) {
      return (`import {${obj.import1}, ${obj.import2}, ${obj.import3}} from "@storybook/addon-docs"`)
    },

    toPreview: function (obj) {
      return (
              'import' +
              '{' +
              obj.import1 +
              ',' +
              obj.import2 +
              ',' +
              obj.import3 +
              '}' +
              'from "@storybook/addon-docs'
      )
    },
  })
</script>
</body>
</html>